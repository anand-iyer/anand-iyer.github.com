
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Fixing missing bootcamp partition in OSX - </title>
  <meta name="author" content="Anand">

  
  <meta name="description" content="Symptom: You use Bootcamp to dual-boot OSX and Windows. After installing Windows, you are not able to see the BOOTCAMP partition in OSX. If you try &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://anand-iyer.com/blog/2014/fixing-missing-bootcamp-partition-in-osx">
  <link href="/favicon.ico" rel="icon">
  
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="" type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Arvo' rel='stylesheet' type='text/css'>
  

</head>

<body   class="no-sidebar"  >
  <header role="banner"><hgroup>
  <h1></h1>
  
    <h2><a href="/">ai</a></h2>
  
</hgroup>

</header>
  <nav role="navigation">
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/publications.html">Publications</a></li>
  <li><a href="/blog/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Fixing Missing Bootcamp Partition in OSX</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-28T04:25:00-04:00" pubdate data-updated="true">May 28<span>th</span>, 2014</time>
        
      </p>
    
  </header>


<div class="entry-content"><p><strong>Symptom:</strong> You use Bootcamp to dual-boot OSX and Windows. After installing Windows, you are not able to see the BOOTCAMP partition in OSX. If you try viewing the disk using disk utility, the BOOTCAMP partition is greyed out, and shows up as FAT formatted although it is NTFS formatted.</p>

<p>Turns out the issue occurs because of a modification during Windows installation. Once Bootcamp Assistant (BCA) created the BOOTCAMP partition and restarted the system, I noticed that there was an additional small-sized partition created (~600MB) just before the BOOTCAMP partition. Instead of ignoring it, I deleted and recreated the bootcamp partition from Windows setup hoping the wasted space would be reclaimed. That was a bad idea.</p>

<p>When you do this, it confuses the hybrid GPT/MBR partitioning scheme used by BCA. Essentially, when you remove/resize/add partitions via Windows setup, that information gets updated in the MBR record, but is not synced to the GPT record. Thus, Windows will see the OSX partition, but not vice-versa.</p>

<p>The easy way to fix this without going through the pain of removing and reinstalling Windows from scratch is to sync the MBR info back to the GPT record. Here&rsquo;s how to do it:</p>

<p>First, we need detailed information on the MBR record&mdash;-where the partition starts, where it ends etc. For this purpose, use the <code>gptsync</code> tool. Homebrew has the gptsync package, but if you try to use it, you&rsquo;ll end up with the following error:</p>

<pre><code>Warning: Unknown GPT spec revision 0x00010000 
</code></pre>

<p>This is because of 64-bit incompatability. A fixed version of gptsync aimed at OSX, extracted from rEFIt is available <a href="https://github.com/JrCs/gptsync">here</a>. Just compile it using Xcode, and you&rsquo;re good to go.</p>

<p>Running <code>gptsync</code> on my machine resulted in the following:</p>

<pre><code>&gt; ./gptsync /dev/disk0

Current GPT partition table:
 #      Start LBA      End LBA  Type
 1             40       409639  EFI System (FAT)
 2         409640    250801735  Mac OS X HFS+
 3      250801736    252071271  Mac OS X Boot
 4      252071936    500117503  Basic Data

Current MBR partition table:
 # A    Start LBA      End LBA  Type
 1              1       409639  ee  EFI Protective
 2         409640    250801735  af  Mac OS X HFS+
 3 *    250802176    251518975  07  NTFS/HPFS
 4      251518976    500115455  07  NTFS/HPFS   
</code></pre>

<p>In the scenario above, the solution was to modify the GPT table to match the MBR table. Essentially, delete partitions 3 and 4, and then recreate it as per MBR. For this purpose, I used the gdisk tool available <a href="http://www.rodsbooks.com/gdisk/">here</a>. Once installed, run the tool (usage instructions are similar to fdisk, tutorial is available on the tool&rsquo;s website). I used <code>d</code> command to delete partitions 3 and 4, <code>n</code> command to recreate them with first sector and last sector noted from MBR and type 0700. Once done, check the changes using command <code>p</code>, and verify for errors using <code>v</code>. If there are no errors, confirm the changes by writing them with command <code>w</code>, reboot and enjoy!</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn"><a href="/" title="About the author (Anand)" rel="author">Anand</a></span></span>

      








  


<time datetime="2014-05-28T04:25:00-04:00" pubdate data-updated="true">May 28<span>th</span>, 2014</time>
      


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/re-signing-ipa-files/" title="Previous Post: Re-signing IPA files">&laquo; Re-signing IPA files</a>
      
      
    </p>
  </footer>
</article>

</div>


    </div>
  </div>
  <footer role="contentinfo"><p>
Copyright &copy; 2014 - Anand
</p>

</footer>
  









<script src="//static.getclicky.com/js" type="text/javascript"></script>
<script type="text/javascript">try{ clicky.init(66366544); }catch(e){}</script>
<noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/66366544ns.gif" /></p></noscript>

</body>
</html>
